{
    "Slug": "always-on-real-time-threat-protection-with-azure-cosmos-db-part-two",
    "Title": "Always-on, real-time threat protection with Azure Cosmos DB - part two",
    "Summary": "The Azure Advanced Threat Protection team’s decision to use Azure Cosmos DB for its cloud-based security service has enabled the team to meet all key requirements, including zero database maintenance, uncompromised real-time performance, elastic scalability, high availability, and strong security and compliance.",
    "Content": "<p><em><em>This two-part blog post is a part of a series about how organizations are using Azure Cosmos DB to meet real world needs, and the difference it&rsquo;s making to them. </em>In <a href=\"https://azure.microsoft.com/en-us/blog/always-on-real-time-threat-protection-with-azure-cosmos-db-part-one/\">part one</a>, we explored the challenges that led the Microsoft Azure Advanced Threat Protection team to adopt Azure Cosmos DB and how they&rsquo;re using it. In part two, we&rsquo;ll examine the outcomes resulting from the team&rsquo;s efforts.</em></p>\n\n<h2>Built-in scalability, performance, availability, and more</h2>\n\n<p>The Azure Advanced Threat Protection team&rsquo;s decision to use Azure Cosmos DB for its cloud-based security service has enabled the team to meet all key requirements, including zero database maintenance, uncompromised real-time performance, elastic scalability, high availability, and strong security and compliance. &ldquo;Azure Cosmos DB gives us everything we need to deliver an enterprise-grade security service that&rsquo;s capable of supporting the largest companies in the world, including Microsoft itself,&rdquo; says Yaron Hagai, Principal Group Engineering Manager for Advanced Threat Analytics at Microsoft.</p>\n\n<h3>Zero maintenance</h3>\n\n<p>A managed database service has saved Hagai&rsquo;s team immense maintenance efforts, allowing Azure Advanced Threat Protection to stay up and running with only a handful of service engineers. &ldquo;Azure Advanced Threat Protection saves us from having to patch and upgrade servers, worry about compliance, and so on,&rdquo; says Hagai. &ldquo;We also get capabilities like encryption at rest without any work on our part, which further enables us to direct our resources to improving the service instead of keeping it up and running.&rdquo;</p>\n\n<p>Scaling to support customer growth is just as hands-free. &ldquo;We use Azure CLI scripts to provision and deprovision clusters in multiple Azure regions&mdash;it&rsquo;s all done automatically, so new clusters for new customers can be deployed easily and when needed,&rdquo; says Hagai. &ldquo;Scaling is also automatic. Throughput-based splitting has been especially helpful because it lets our databases scale to support customer growth with zero maintenance from the team.&rdquo;</p>\n\n<h3>Real-time performance</h3>\n\n<p>Azure Cosmos DB is delivering the performance needed for an important security service like Azure Advanced Threat Protection. &ldquo;Since we protect organizations after they have been breached, speed of detection is essential to minimizing the damage that might be done,&rdquo; explains Hagai. &ldquo;A high-throughout, super-scalable database lets us support lots of complex queries in real-time, which is what allows us to go from breach to alerting in seconds. The performance provided by Azure Cosmos DB is one more thing that makes it the most production-grade document DB in the market, which is another reason we chose it.&rdquo;</p>\n\n<p>The following graph shows sustained high throughout for the service&rsquo;s largest tenant, with a heavy bias towards writes, which happen every 10 minutes as Azure Advanced Threat Protection persists in-memory caches of profiles to Azure Cosmos DB.</p>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/af0d7a15-0a17-44cf-921c-a66ba835ee69.png\"><img alt=\"Graph showing sustained high throughout for the service’s largest tenant\" border=\"0\" height=\"351\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/82d08e8e-ea27-4fb4-8b67-f0d36091aa92.png\" style=\"border: 0px currentcolor; border-image: none; display: inline; background-image: none;\" title=\"Sum action for a single service instance\" width=\"2001\"></a></p>\n\n<h3>Elastic scalability</h3>\n\n<p>Since Azure Advanced Threat Protection launched in March 2018, its usage has grown exponentially in terms of both users protected and paying organizations. &ldquo;Azure Cosmos DB allows us to scale constantly, without any friction, which has helped us support a 600 percent growth in our customer base over the past year,&rdquo; says Hagai. &ldquo;That same scalability allows us to support larger customer installations than we could with Microsoft Advanced Threat Analytics, our on-premises solution. Microsoft&rsquo;s own internal network is a prime example; it had grown too large to support with a single, on-premises server running Mongo DB, but with Azure Cosmos DB, it&rsquo;s no problem.&rdquo;</p>\n\n<p>Scaling up and down to support frequent fluctuations in traffic, as shown in the following graph, is just as painless. &ldquo;The graph shows traffic for our largest tenant, with the spikes in throughout due to scheduled tasks that produce business telemetry,&rdquo; he explains. &ldquo;This is a great example of the auto-scaling benefits of Azure Cosmos DB and how they allow us to automatically scale up individual databases to support a short burst of throughput each day, then automatically scale back down after the telemetries are calculated to minimize our service delivery costs.&rdquo;</p>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/3037bbec-ff32-4b1c-9cb0-520fa8f56b86.png\"><img alt=\"Graph showing traffic for a large tenant with the spikes in throughout due to scheduled tasks that produce business telemetry\" border=\"0\" height=\"368\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/484f4631-ede9-41fb-9b76-a4b8f84d2329.png\" style=\"border: 0px currentcolor; border-image: none; display: inline; background-image: none;\" title=\"Sun throughput for a single service instance (RU/s)\" width=\"1925\"></a></p>\n\n<h3>Strong security and compliance</h3>\n\n<p>Because Azure Advanced Threat Protection is built on Azure Cosmos DB and other Azure services, which themselves have high compliance certifications, it was easy to achieve the same for Azure Advanced Threat Protection. &ldquo;The access control mechanisms in Azure Cosmos DB allow us to easily secure access and apply advanced JIT policies, helping us keep customer data secure,&rdquo; says Hagai.</p>\n\n<h3>High availability</h3>\n\n<p>Although the availability SLA for Azure Cosmos DB is 99.999 percent for multi-region databases, to Hagai, the actual availability they&rsquo;ve seen in production is even higher. &ldquo;I had the Azure Cosmos DB team pull some historical availability numbers, and it turns out that the actual availability we&rsquo;ve seen during April, May, and June of 2019 has been between 99.99995 and 99.99999 percent,&rdquo; says Hagai. &ldquo;To us, that&rsquo;s essentially 100 percent uptime, and another thing we don&rsquo;t need to worry about.&rdquo;</p>\n\n<p>Learn more about <a href=\"https://azure.microsoft.com/features/azure-advanced-threat-protection/\" target=\"_blank\">Azure Advanced Threat Protection</a> and <a href=\"https://www.azurecosmosdb.com/\" target=\"_blank\">Azure Cosmos DB</a> today.</p>\n"
}
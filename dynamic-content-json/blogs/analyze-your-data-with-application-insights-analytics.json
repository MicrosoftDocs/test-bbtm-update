{
    "Slug": "analyze-your-data-with-application-insights-analytics",
    "Title": "Analyze your data with Application Insights Analytics",
    "Summary": "You can now apply the powerful Analytics query language to high-volume NoSQL data streams that you import from any source. ",
    "Content": "<div style=\"background:#eee;border:1px solid #ccc;padding:5px 10px;\"><strong>Updated on July 23, 2019: </strong>The functionality described in this blog was retired and no longer exist in Application Insights. Alternatively, you can send your <a href=\"https://docs.microsoft.com/en-us/azure/azure-monitor/platform/data-sources-custom-logs\" target=\"_blank\">custom log </a>to the <a href=\"https://docs.microsoft.com/en-us/azure/azure-monitor/overview#overview\" target=\"_blank\">Azure Monitor log store</a>, which is Log Analytics. You can query this data from Log Analytics or your Application Insights resource using <a href=\"https://docs.microsoft.com/en-us/azure/azure-monitor/log-query/cross-workspace-query\">cross-resource queries</a>.</div>\n\n<p>You can now apply the powerful <a href=\"https://docs.microsoft.com/azure/application-insights/app-insights-analytics-tour\">Analytics</a> query language to high-volume NoSQL data streams that you <a href=\"https://docs.microsoft.com/azure/application-insights/app-insights-analytics-import\">import from any source</a>. You can display the results in <a href=\"https://powerbi.microsoft.com/\">Power BI</a> or Azure dashboards, and get alerts if specified thresholds are crossed. Hitherto, Analytics queries have been applicable to performance and usage telemetry collected by <a href=\"https://docs.microsoft.com/azure/application-insights/app-insights-overview\">Azure Application Insights </a>from your live web app. Now, you can either join imported data with your app telemetry, or instead run queries to analyze completely separate data. Data can be supplied as either JSON or DSV (delimiter-separated values).</p>\n\n<p>Here are some typical scenarios:</p>\n\n<ul>\n <li><strong>Join app telemetry with a lookup table</strong>. For example, you could import a table that maps URLs from your website to more readable page titles. In Analytics, you can create a dashboard chart report that shows the ten most popular pages in your website.</li>\n <li><strong>Correlate your application telemetry with other sources</strong> such as network traffic, server data, or CDN log files.</li>\n <li><strong>Apply Analytics to a separate data stream</strong>. If you have any sparse, timestamped streams, you can analyze it with Analytics, much more efficiently than with SQL in many cases. This is the scenario we will focus on in this blog.</li>\n</ul>\n\n<p>For example, let&rsquo;s suppose you receive a data feed about flights. You could automate a daily analysis of route popularity and congestion. Analytics can run complex queries, including joins, aggregations, and statistical functions, to extract the necessary results. You can view the results in the range of charts available in Analytics. Or you could have <a href=\"https://powerbi.microsoft.com/\">Power BI</a> run the queries each day, plot the results on maps, and present them on a website.</p>\n\n<h1>Set up</h1>\n\n<p>To analyze your data with Analytics, you need an account in <a href=\"https://azure.com\">Microsoft Azure</a>.</p>\n\n<p><a href=\"https://portal.azure.com\">Sign in to the portal</a> and set up a <a href=\"https://azure.microsoft.com/services/storage/\">Storage</a> resource in Azure. This is where you will put your data before it&rsquo;s sucked into Analytics.</p>\n\n<p><a href=\"https://docs.microsoft.com/azure/application-insights/app-insights-create-new-resource\">Create an Application Insights resource</a>. Then navigate from there to the Analytics page.</p>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/a1136ac9-6321-4296-ada2-c0898de524bb.png\"><img alt=\"Analyze your data with Application Insights Analytics\" border=\"0\" height=\"45\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/4b20567b-aad3-4c74-9b4c-49f904a9afe2.png\" style=\"border: 0px currentColor; border-image: none; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; background-image: none;\" title=\"Open Analytics portal\" width=\"361\"></a></p>\n\n<h1>Define your data source</h1>\n\n<p>Before you analyze some data, you need to tell Analytics about its format. Like we said, we&rsquo;ll skip the Application Insights material for now, and go straight to defining our own data source.</p>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/3127c813-a24a-41c6-9115-52fabf28aa2f.png\"><img alt=\"Analyze your data with Application Insights Analytics\" border=\"0\" height=\"276\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/39197a83-a900-4222-87ef-230a21203239.png\" style=\"border: 0px currentColor; border-image: none; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; background-image: none;\" title=\"Add new data source\" width=\"221\"></a></p>\n\n<p>This opens a wizard where you name the data source and define its schema. You can do that either by providing an explicit schema, or by uploading a small sample of my data &ndash; that&rsquo;s usually easier.</p>\n\n<p>In the flight data example, the files are in CSV format. The sample data file includes headers, and the schema is automatically inferred from it. You get the opportunity to update the inferred data types and field names if necessary.</p>\n\n<h1>Ingest data</h1>\n\n<p>Once you&rsquo;ve defined a schema, you can upload data files as often as you like. Data files of hundreds of MB are easily handled by Analytics.</p>\n\n<p>To ingest the data, it&rsquo;s easiest to automate the process with a short script. The script uploads the data to Azure storage, and then notifies Analytics to ingest it. There&rsquo;s a sample in the <a href=\"https://docs.microsoft.com/en-us/azure/application-insights/app-insights-analytics-import#import-data\">import documentation</a>.</p>\n\n<h1>Run queries</h1>\n\n<p>Here&rsquo;s a query to look for the top 10 destination airports by airlines.</p>\n\n<pre>\nairlineRoutes\n| summarize count() by Destination_airport \n| top 10 by count_ desc\n| render piechart</pre>\n\n<p>&nbsp;</p>\n\n<p>Result:</p>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/a1b3bbe5-84af-4e38-991a-b5f476fd59f1.png\"><img alt=\"Analyze your data with Application Insights Analytics\" border=\"0\" height=\"306\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/7f93dbfd-bf3a-48fa-9d3a-e6a3736aee7f.png\" style=\"border: 0px currentColor; border-image: none; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; background-image: none;\" title=\"\" width=\"480\"></a></p>\n\n<p>The <a href=\"https://docs.microsoft.com/azure/application-insights/app-insights-analytics-tour\">query language</a> is powerful but easy to learn, and has a piped model in which each operator performs one task &ndash; much easier to work with than the nested SELECTs of SQL.</p>\n\n<h1>Join multiple tables</h1>\n\n<p>Analytics can ingest multiple sources and your queries can run joins over them.</p>\n\n<p>For example, but wouldn&rsquo;t it much nicer to see the airports identified by full name instead of by their codes? Let&rsquo;s add a new data source, airportsData, which maps each airport code to its name and other information. Now we can perform a <a href=\"https://docs.microsoft.com/azure/application-insights/app-insights-analytics-reference#join-operator\">join</a> on the tables:</p>\n\n<pre class=\"prettyprint\">\nairlineRoutes \n| summarize routeCount = count() \n  by airportCode = destination_airport // rename field for join\n| top 10 by routeCount count_ desc \n| join kind=inner  ( airportsData  ) on airportCode\n| project routeCount, airportCode  // the fields we want\n| render piechart</pre>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/4c6ef804-8d54-427c-a46e-dc290bfb7be8.png\"><img alt=\"Analyze your data with Application Insights Analytics\" border=\"0\" height=\"183\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/765a31d3-32d0-4c28-8302-a8a8083fb3fd.png\" style=\"border: 0px currentColor; border-image: none; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; background-image: none;\" title=\"\" width=\"610\"></a></p>\n\n<h1>Augmenting Application Insights telemetry</h1>\n\n<p>The main job of Analytics is as the powerful query tool of Application Insights, which monitors the health and usage of your web applications. One of the reasons for importing data into Analytics is to augment the telemetry data. For example, to make the telemetry reports more readable, query URLs can be translated to page names.</p>\n\n<h1>Get started today</h1>\n\n<p>Analytics can be applied to your data today. <a href=\"https://docs.microsoft.com/azure/application-insights/app-insights-analytics-import\">Read detailed how-to here</a>.</p>\n\n<p>Whether you want to enrich your data or to analyze the logging data of your application, you can easily add a new data source and start ingesting the data. With a high-volume ingestion, you can now apply the power of Analytics query language to your own custom data.</p>\n\n<p>As always, feel free to send us your questions or feedback by using one of the following channels:</p>\n\n<p>&middot; <a href=\"https://analytics.applicationinsights.io/demo\">Try Application Analytics</a></p>\n\n<p>&middot; <a href=\"https://visualstudio.uservoice.com/forums/357324-application-insights/category/161991-analytics\">Suggest ideas and vote in Application Insights ideas</a></p>\n\n<p>&middot; <a href=\"https://social.msdn.microsoft.com/Forums/vstudio/home?forum=ApplicationInsights\">Join the conversation at the Application Insights Community</a></p>\n"
}
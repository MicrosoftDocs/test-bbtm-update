{
    "Slug": "analyze-data-in-azure-data-explorer-using-kql-magic-for-jupyter-notebook",
    "Title": "Analyze data in Azure Data Explorer using KQL magic for Jupyter Notebook",
    "Summary": "Exploring data is like solving a puzzle. You create queries and receive instant satisfaction when you discover insights, just like adding pieces to complete a puzzle.",
    "Content": "<p>Exploring data is like solving a puzzle. You create queries and receive instant satisfaction when you discover insights, just like adding pieces to complete a puzzle. Imagine you have to repeat the same analysis multiple times, use libraries from an open-source community, share your steps and output with others, and save your work as an artifact. Notebooks helps you create one place to write your queries, add documentation, and save your work as output in a reusable format.</p>\n\n<p><a href=\"https://jupyter.org/\" target=\"_blank\">Jupyter Notebook</a> allows you to create and share documents that contain live code, equations, visualizations, and explanatory text. Its includes data cleaning and transformation, numerical simulation, statistical modeling, and machine learning.</p>\n\n<p>We are excited to announce KQL magic commands which extends the functionality of the Python kernel in Jupyter Notebook. KQL magic allows you to write KQL queries natively and query data from Microsoft Azure Data Explorer. You can easily interchange between Python and KQL, and visualize data using rich Plot.ly library integrated with KQL render commands. KQL magic supports Azure Data Explorer, Application Insights, and Log Analytics as data sources to run queries against.</p>\n\n<p>Use a single magic &ldquo;%kql&rdquo; to run a single line query, or use cell magic &ldquo;%%kql&rdquo; to run multi-line queries. In the following example we run a multi-line query and render a pie chart using the ploy.ly Python library:</p>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/4918bc62-3905-49d9-9e0d-3e2f171aa035.png\"><img alt=\"Screenshot of multi line query and render of pie chart using ploy.ly\" border=\"0\" height=\"554\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/02a47d86-007f-4bb6-8ec7-61f67a87eebb.png\" style=\"border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;\" title=\"Screenshot of multi line query and render of pie chart using ploy.ly\" width=\"750\"></a></p>\n\n<p>If you are a Python user, you can place the result set into a <a href=\"https://pandas.pydata.org/\" target=\"_blank\">pandas dataframe</a>.</p>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/945b0f96-a791-45a7-b3dd-e36c16671b40.png\"><img alt=\"Screenshot pf placing result set into a pandas dataframe\" border=\"0\" height=\"210\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1bfdfca5-9008-4f31-9dc5-f9526ef30403.png\" style=\"border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;\" title=\"Screenshot pf placing result set into a pandas dataframe\" width=\"750\"></a></p>\n\n<h2>Common use cases</h2>\n\n<ul>\n <li><strong>Data science</strong>: Data scientists use KQL magic to analyze and visualize data from Azure Data Explorer, easily interchange Python code with KQL queries to experiment, train, score machine learning models, and also save notebooks as artifacts.</li>\n <li><strong>Data analytics</strong>: Use KQL magic to query, analyze, and visualize data, with no Python knowledge needed. For Python users, easily query data from Azure Data Explorer and use various open-source libraries from the Python ecosystem.</li>\n <li><strong>Business reviews</strong>: Use KQL magic for business and product reviews. Create the notebook once and refresh with new values every time you use it.</li>\n <li><strong>Incident response</strong>: Use KQL magic to create operational documents, chain-up your queries for easy investigation, save the notebook for reproducibility and artifacts for remote connectivity analyzer (RCA).</li>\n <li><strong>Security analytics</strong>: Query data from Azure Data Explorer and use the rich Python ecosystem for security analytics to analyze and visualize your data. For example, one of the internal Microsoft security teams uses KQL magic with Juypter for standard analysis patterns to triage security alerts, they have been transforming incident response playbooks into parameterized Jupyter Notebooks to automate repetitive investigation workflows. A sample notebook is available in the <a href=\"https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fnotebooks.azure.com%2Fashwinrp%2Fprojects%2Fthreat-hunting-with-notebooks%2Fhtml%2FAzure%2520Data%2520Explorer-%2520Kqlmagic%2520Demo.ipynb&amp;data=02%7C01%7Cv-jujame%40microsoft.com%7C46cb98f84c534546f9b608d680b5c92d%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636837915587417837&amp;sdata=1l5Xf3daONbE2Rz%2Fp3d1f7yrrxymlNjPzO6UE%2BLPuD4%3D&amp;reserved=0\" target=\"_blank\">Azure Data Explorer KQL magic Demo</a> and in GitHub Repo under <a href=\"https://github.com/ashwin-patil/threat-hunting-with-notebooks\" target=\"_blank\">Threat-hunting-with-notebooks</a>.</li>\n</ul>\n\n<h2>Getting started</h2>\n\n<p>Our exciting capabilities will allow you to have fun with your data analytics. You can see additional documentation and examples of KQL magic by visiting our documentation, &ldquo;<a href=\"https://docs.microsoft.com/en-us/azure/data-explorer/kqlmagic\" target=\"_blank\">Analyze data using Jupyter Notebook and KQL magic</a>.&rdquo;</p>\n"
}
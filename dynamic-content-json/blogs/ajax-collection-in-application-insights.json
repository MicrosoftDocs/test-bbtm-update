{
    "Slug": "ajax-collection-in-application-insights",
    "Title": "AJAX Collection in Application Insights",
    "Summary": "Weâ€™re excited to announce that Application Insights will now automatically tell you about the performance of AJAX calls made by your web page apps.",
    "Content": "<p><a><font color=\"#000000\">We&rsquo;re excited to announce that </font></a><a href=\"https://azure.microsoft.com/services/application-insights/\">Application Insights</a><font color=\"#000000\"> will now automatically tell you about the performance of AJAX calls made by your web page apps. Many modern web apps load their basic structure, then use AJAX calls to load content. </font><a><font color=\"#000000\">Failed </font></a><font color=\"#000000\">or slow AJAX calls leave the users looking at empty web parts or stuck progress bars.</font></p>\n\n<p><font color=\"#000000\">With this new feature, you&rsquo;ll be able to see whether and how often your AJAX-dependent features cause problems. Best of all, you don&rsquo;t have to do any additional configuration to make it happen. Telemetry about AJAX calls is a function of our JavaScript web client SDK, so make sure you&rsquo;ve </font><a href=\"https://azure.microsoft.com/documentation/articles/app-insights-javascript/\">set up your web pages for Application Insights</a><font color=\"#000000\">.</font></p>\n\n<h2><font color=\"#000000\">Diagnosing AJAX issues</font></h2>\n\n<p><a><font color=\"#000000\">How</font></a><font color=\"#000000\"> can you find out that you&rsquo;ve got issues caused by AJAX calls? And how can you use the new features to help you fix them?</font></p>\n\n<p><font color=\"#000000\">Open the browsers blade by clicking Settings, Browsers; or click through the browsers chart, Page View Duration, on the service overview blade.</font></p>\n\n<p><font color=\"#000000\">The three charts: Dependency Calls, Dependency Failures and Dependency Duration, give a nice overview of how your AJAX calls are behaving. Drill into any of these charts to gather more insights. </font></p>\n\n<p><strong>Note:</strong> If you do not see these new charts select the Restore Defaults option.</p>\n\n<p><font color=\"#000000\"><img alt=\"3charts\" border=\"0\" height=\"461\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/d4390652-9bd3-4d1e-bb1b-e997a2ad6371.png\" style=\"border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; float: none; padding-top: 0px; padding-left: 0px; margin: 0px auto; display: block; padding-right: 0px; border-top-width: 0px\" title=\"3charts\" width=\"480\"></font></p>\n\n<p><font color=\"#000000\">In this case, the dependency is the AJAX server. We track AJAX calls from the browser in the same way that we track other dependencies in the server. If you open the Filters for these charts, you&rsquo;ll see that we filter on device.type = &ldquo;Browser.&rdquo;</font></p>\n\n<h3><font color=\"#000000\">How can you use these charts?</font></h3>\n\n<p><font color=\"#000000\"><strong>Dependency Duration</strong>: Use the Dependency Duration chart to see how long responses are taking. You can decide what acceptable call durations would be for your application and compare that to the durations you see on the Dependency Duration chart. </font></p>\n\n<p><a><font color=\"#000000\">An</font></a><font color=\"#000000\"> alternative approach would be to insert code to time how long it takes to complete a response to the user, then report it in trackMetric calls. But that would involve investing in some code, whereas you get the AJAX call durations without writing anything. Since AJAX calls are likely to be the longest and least reliable part of an operation, it&rsquo;s usually enough to measure those alone. So although the exact way to monitor your app&rsquo;s response time involves writing some app-specific code, this general method is much easier and almost as effective. </font></p>\n\n<p><font color=\"#000000\"><strong>Dependency Calls</strong>: The Dependency Calls chart provides quick access to the number of calls made. Compare the Dependency Calls chart to Dependency Failures to gain an idea of your failure rate. </font></p>\n\n<p><font color=\"#000000\"><strong>Dependency Failures</strong>: Depending on where the failure is, this typically indicates customer dissatisfaction. Anything with a response code of 400 or higher is counted as a failure. Filter the charts by URI to compare the total count of calls for that URI with the number of failures, to see how often it happens.</font></p>\n\n<p><font color=\"#000000\">Under the Dependency charts there are a couple grids:<img alt=\"dependencybydependency\" border=\"0\" height=\"428\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/28b12f6f-ac33-4b60-ae9b-e0850b7cf291.png\" style=\"border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; float: none; padding-top: 0px; padding-left: 0px; margin: 0px auto; display: block; padding-right: 0px; border-top-width: 0px\" title=\"dependencybydependency\" width=\"480\"></font></p>\n\n<p><font color=\"#000000\"><strong>Average of Page view duration by Operation name</strong>: This grid provides the average amount of time your customer is waiting on a page to load. Drill into a specific operation name to gain more insights and discover what&#39;s slowing you down.&nbsp; </font></p>\n\n<p><font color=\"#000000\"><strong>Total of Dependency calls by Dependency</strong>: This grid shows AJAX requests grouped by AJAX server name. Click through any chart for more detail. Some web apps just send AJAX calls to their home server, but others call on other servers. If your app is one of the latter, you&rsquo;ll find it useful to look at this grid.</font></p>\n\n<h2><font color=\"#000000\">Slow page load</font></h2>\n\n<p><font color=\"#000000\">If your page makes AJAX calls synchronously while it&rsquo;s loading, slow responses can be a cause of slow page loads.</font></p>\n\n<p><font color=\"#000000\">On the Browsers page, there&rsquo;s a grid showing </font><a><font color=\"#000000\">Average of Page view duration by Operation Name</font></a><font color=\"#000000\">. It shows page load times at a glance. If any page sticks out as slow to load, click through to see a blade specific to that page. Now you can see the same set of charts showing AJAX dependency calls, dependency failures, and duration but filtered just for this page name. You can drill even further into any single page view blade. <img alt=\"ajax_3\" border=\"0\" height=\"322\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/5efd7a07-689c-4a04-abdd-0b453d450f0e.png\" style=\"border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; float: none; padding-top: 0px; padding-left: 0px; margin: 0px auto; display: block; padding-right: 0px; border-top-width: 0px\" title=\"ajax_3\" width=\"610\"></font></p>\n\n<p><font color=\"#000000\">From this, you can easily determine whether the slow page loads are caused by the AJAX calls, or by something else.</font></p>\n\n<h2><font color=\"#000000\">Individual page load details blade</font></h2>\n\n<p><font color=\"#000000\">To help diagnose the problem, you can inspect individual instances of page loads. In addition to other details, there is now an added section: AJAX calls. This shows the AJAX calls made on this page, allowing you to see the calls, how long they took and how successful they were.</font></p>\n\n<p><font color=\"#000000\"><img alt=\"individual_page_load_details_blade\" border=\"0\" height=\"480\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/9480fc0c-41bd-4df0-986f-5c17590ea197.png\" style=\"border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; float: none; padding-top: 0px; padding-left: 0px; margin: 0px auto; display: block; padding-right: 0px; border-top-width: 0px\" title=\"individual_page_load_details_blade\" width=\"378\"></font></p>\n\n<h2><font color=\"#000000\">AJAX dependency blade</font></h2>\n\n<p><font color=\"#000000\">From the single page request details blade you can select a single AJAX call. Selecting a call will open a new dependency blade for this AJAX call. Here you can see specific properties for this AJAX call including full URL. Also on this blade in the Related Items section, you&#39;ll find a link to the Page View Blade that this AJAX call was made on. If you landed on an AJAX dependency blade via search, you may want to look into at the page view blade. Because AJAX dependencies are treated the same as other dependency types they are displayed similarly.</font></p>\n\n<p><font color=\"#000000\"><img alt=\"ajax_details_blade\" border=\"0\" height=\"480\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/b0e53d90-aa43-4987-819f-34b8b5f51e07.png\" style=\"border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; float: none; padding-top: 0px; padding-left: 0px; margin: 0px auto; display: block; padding-right: 0px; border-top-width: 0px\" title=\"ajax_details_blade\" width=\"397\"></font></p>\n\n<h2><font color=\"#000000\">Data quota</font></h2>\n\n<p><font color=\"#000000\">Depending on your application, collecting AJAX dependencies could result in a steep increase in your data collection rates. This increase could possibly cause your application to reach its quota sooner.</font></p>\n\n<p><font color=\"#000000\">To see the breakdown of your data volume by data type go to settings and select Quota and Pricing.</font></p>\n\n<p><font color=\"#000000\"><img alt=\"pricing_ajax\" border=\"0\" height=\"480\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/b3a8b982-29e8-4a3d-81ba-2dc7c7f9068e.png\" style=\"border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; float: none; padding-top: 0px; padding-left: 0px; margin: 0px auto; display: block; padding-right: 0px; border-top-width: 0px\" title=\"pricing_ajax\" width=\"453\"></font></p>\n\n<p><font color=\"#000000\">You can click into charts to see more details for certain data types. AJAX collection began on December 23, 2015. If you notice a large spike in dependencies around that date, it was highly likely the AJAX collection caused it.&nbsp; </font></p>\n\n<h3><font color=\"#000000\">Limit usage</font></h3>\n\n<p>If you want to limit usage you have a few options:</p>\n\n<ol>\n <li><font color=\"#000000\">Use Sampling: See our <a href=\"https://azure.microsoft.com/documentation/articles/app-insights-sampling/\">documentation page</a> on Sampling.</font></li>\n <li><font color=\"#000000\">Use the <a href=\"https://github.com/Microsoft/ApplicationInsights-JS/blob/master/API-reference.md#config\">maxAjaxCallsPerView parameter</a>.</font></li>\n</ol>\n\n<pre class=\"prettyprint\">\n    // Default 500 - controls how many ajax calls will be monitored per page view.\n    // Set to -1 to monitor all ajax calls on the page.\n    maxAjaxCallsPerView: number;</pre>\n\n<p>3. Turn off AJAX auto collection: Learn how to Opt Out in the following section.</p>\n\n<h2><font color=\"#000000\">Opt Out</font></h2>\n\n<p><a><font color=\"#000000\">AJAX calls are automatically collected. To disable this simply add: disableAjaxTracking: true in your config file. For more details see </font></a><a href=\"https://github.com/Microsoft/ApplicationInsights-JS/blob/master/API-reference.md#config\">our documentation</a><font color=\"#000000\">.</font></p>\n\n<h2><font color=\"#000000\">Please let us know&hellip;</font></h2>\n\n<p><font color=\"#000000\">The Application Insights JavaScript SDK is a work in progress. For any issues or feature requests please visit our </font><a href=\"https://github.com/Microsoft/ApplicationInsights-JS\">repository</a><font color=\"#000000\">. To learn more about dependency collection in general please see our <a href=\"https://azure.microsoft.com/documentation/articles/app-insights-dependencies/\">documentation</a>. </font></p>\n\n<p><a><font color=\"#000000\">The Application Insights team is committed to providing quality tools for developers. We would greatly appreciate any</font></a><font color=\"#000000\"> </font>feedback or new feature recommendations<font color=\"#000000\">.</font></p>\n"
}
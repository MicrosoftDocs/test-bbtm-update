{
    "Slug": "adding-users-to-your-sql-azure-database",
    "Title": "Adding Users to Your SQL Azure Database",
    "Summary": "[This article was contributed by the SQL Azure team.]When you generate a SQL Azure server via the SQL Azure portal, you generate a user name and password at the same time. This is your administrativeâ€¦",
    "Content": "<p>[This article was contributed by the SQL Azure team.]</p>\n\n<div style=\"background:#eee;border:1px solid #ccc;padding:5px 10px;\"><em><strong>Update September 30, 2021:&nbsp;</strong>For updated information on how to authorize database access for Azure SQL Database, including adding user accounts and logins to databases and configuring user account permissions, please reference <a href=\"https://docs.microsoft.com/en-us/azure/azure-sql/database/logins-create-manage\" target=\"_blank\">this documentation</a>.</em></div>\n\n<p>When you generate a SQL Azure server via the <a href=\"https://sql.azure.com/\">SQL Azure portal</a>, you generate a user name and password at the same time. This is your administrative account it has access to all databases on that server. However, you might want to give other people access to some or all of your databases on that server, with full or restricted permissions. This article will show you how to generate additional user accounts on your SQL Azure databases.</p>\n\n<p>Currently, the SQL Azure portal does not allow you to administrate additional users and logins, in order to do this you need to use Transact-SQL. The easiest way to execute Transact -SQL against SQL Azure is to use the SQL Server Management Studio 2008 R2. Learn more about attaching it to SQL Azure here. SQL Server Management Studio 2008 R2 will list the users and logins associated with the databases; however, at this time it does not provide a graphical user interface for creating the users and logins.</p>\n\n<h4>Generating Logins</h4>\n\n<p>Logins are server wide login and password pairs, where the login has the same password across all databases. Here is some sample Transact-SQL that creates a login:</p>\n\n<pre class=\"csharpcode\">\nCREATE LOGIN readonlylogin WITH password=&#39;1231!#ASDF!a&#39;;</pre>\n\n<p>You must be connected to the master database on SQL Azure with the administrative login (which you get from the SQL Azure portal) to execute the CREATE LOGIN command. Some of the common SQL Server logins can be used like sa, Admin, root, for a complete list click <a href=\"https://msdn.microsoft.com/en-us/library/ee336235.aspx\">here</a>.</p>\n\n<h4>Creating Users</h4>\n\n<p>Users are created per database and are associated with logins. You must be connected to the database in where you want to create the user. In most cases, this is not the master database. Here is some sample Transact-SQL that creates a user:</p>\n\n<pre class=\"csharpcode\">\nCREATE USER readonlyuser FROM LOGIN readonlylogin;</pre>\n\n<h4>User Permissions</h4>\n\n<p>Just creating the user does not give them permissions to the database. You have to grant them access. In the Transact-SQL example below the readonlyuser is given read only permissions to the database via the db_datareader role.</p>\n\n<pre class=\"csharpcode\">\nEXEC sp_addrolemember &#39;db_datareader&#39;, &#39;readonlyuser&#39;;</pre>\n\n<h4>Deleting Users and Logins</h4>\n\n<p>Fortunately, SQL Server Management Studio 2008 R2 does allow you to delete users and logins. To do this traverse the Object Explorer tree and find the Security node, right click on the user or login and choose Delete.</p>\n\n<h4>More Information</h4>\n\n<p>One thing to note is that SQL Azure does not allow the USE Transact-SQL statement, which means that you cannot create a single script to execute both the CREATE LOGIN and CREATE USER statements, since those statements need to be executed on different databases.</p>\n\n<p>There is additional information about <a href=\"https://msdn.microsoft.com/en-us/library/ee336235.aspx\">Managing Databases and Logins in SQL Azure</a> on MSDN.</p>\n\n<h4>Summary</h4>\n\n<p>Do you have questions, concerns, comments? Post them below and we will try to address them.</p>\n"
}
{
    "Slug": "announcing-new-and-improved-datastax-cluster-deployment-experience-on-azure-marketplace",
    "Title": "Announcing new and improved DataStax Cluster deployment experience on Azure Marketplace",
    "Summary": "Earlier this week at WPC 2015, we launched a new and improved DataStax Cassandra cluster (BYOL) deployment experience on Azure. In a single click, you can deploy 4, 12 or 36 nodes (VMs) running fantastic power of DataStax. ",
    "Content": "<p>Earlier this week at <a href=\"https://mspartner.microsoft.com/en/us/Pages/WPC/overview.aspx\">WPC</a> 2015, we launched a new and improved <a href=\"https://portal.azure.com/#create/datastax.datastax-enterprise-clusterbyol-production\">DataStax Cassandra cluster (BYOL)</a> deployment experience on Azure. In a single click, you can deploy 4, 12 or 36 nodes (VMs) running fantastic power of DataStax. In this blog post, we will walk you through the steps required to deploy this cluster.</p>\n\n<h2>About DataStax</h2>\n\n<p><a href=\"https://datastax.com/\">DataStax</a> delivers Apache Cassandra in a database platform purpose built for the performance and availability demands of IOT, web, and mobile applications, giving enterprises a secure always-on database that remains operationally simple when scaled in a single datacenter or across multiple data centers and clouds. DataStax Enterprise includes: DataStax Enterprise Server, DataStax OpsCenter &amp; Expert Support and Services</p>\n\n<h2>Current DataStax offers on Azure Marketplace</h2>\n\n<p>There are two offers currently available in the Azure Marketplace.</p>\n\n<ol>\n <li><a href=\"https://portal.azure.com/#create/datastax.datastax-enterprise-clusterbyol-production\">DataStax Enterprise Cluster</a> - This template is for production use. For approved usage of these Marketplace offers, you need to have the appropriate license. If you already have a DataStax license, you can use your existing DataStax login and password. If not, you can register <a href=\"https://www.datastax.com/download\">here</a>.</li>\n <li><a href=\"https://portal.azure.com/#create/datastax.datastax-enterprise-non-production-use-onlysandbox_single-node.1.45.226\">DataStax Enterprise Sandbox, Single Node (nonprod)</a> &ndash;&nbsp; This template deploys a single node cluster which is great for sandbox development and testing. In addition, this offer doesn&rsquo;t require a license, however, DataStax recommends that you register <a href=\"https://www.datastax.com/download\">here</a> as well.</li>\n</ol>\n\n<h2>DataStax Enterprise Cluster Deployment on Azure Marketplace</h2>\n\n<p>You can view the current DataStax offers in the Azure marketplace by navigating to marketplace and searching for &lsquo;DataStax&rsquo; in the search bar <img alt=\"datastaxmarketplace1\" border=\"0\" height=\"301\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/datastaxmarketplace1.png\" style=\"background-image: none; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; display: block; padding-right: 0px; margin-right: auto; border-width: 0px;\" title=\"datastaxmarketplace1\" width=\"610\"> Once you are done selecting a particular offer, please go through the create process and enter the &lsquo;Basics&rsquo; configuration for the cluster deployment which includes &ndash; Username, Password, ClusterName, Region and other details <img alt=\"datastaxmarketplace2\" border=\"0\" height=\"353\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/datastaxmarketplace2.png\" style=\"background-image: none; float: none; padding-top: 0px; padding-left: 0px; margin: 0px auto; display: block; padding-right: 0px; border-width: 0px;\" title=\"datastaxmarketplace2\" width=\"610\"> &nbsp; In the next step, you need to provide the DatatStax cluster settings as described below.</p>\n\n<h2>Cluster Size</h2>\n\n<p>The current Enterprise cluster offering can deploy a cluster of DataStax Enterprise nodes -- either 4, 12 or 36 nodes. Before you deployments Please note that you need a minimum of 17, 49 &amp; 145 cores in the &lsquo;Resource Manager stack&rsquo; to deploy a 4, 12 &amp; 36 Node cluster respectively with a Standard_D12 VM Size. You can always check your current quota in your subscription using PowerShell or Azure CLI. Read more about it <a href=\"https://azure.microsoft.com/en-us/documentation/articles/resource-group-deploy-debug/#authentication-subscription-role-and-quota-issues\">here</a>. Deploying a cluster larger than 20 cores will require an increase in your default Azure core quota. Please contact Microsoft support to have that adjusted. You can read more about how to make that support request <a href=\"https://azure.microsoft.com/en-us/documentation/articles/resource-group-deploy-debug/#authentication-subscription-role-and-quota-issues\">here</a> and learn more about Resource Manager Stack Quotas <a href=\"https://azure.microsoft.com/en-us/documentation/articles/azure-subscription-service-limits/\">here</a>.</p>\n\n<h2>Virtual Machine Sizes</h2>\n\n<p>The clusters have been optimized and are currently supported in the following Virtual Machine Sizes today</p>\n\n<ul>\n <li>Standard_D12</li>\n <li>Standard_D13</li>\n <li>Standard_D14</li>\n <li>Standard_G2</li>\n <li>Standard_G3</li>\n <li>Standard_G4</li>\n <li>Standard_G5</li>\n</ul>\n\n<h2>DataStax Enterprise Credentials</h2>\n\n<p>If you already have a DataStax license, you can use your existing DataStax login and password. If not, you can register here: <a href=\"https://www.datastax.com/download\">https://www.datastax.com/download</a> and the download credentials will be emailed to you. <img alt=\"datastaxmarketplace5\" border=\"0\" height=\"480\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/datastaxmarketplace5.png\" style=\"background-image: none; float: none; padding-top: 0px; padding-left: 0px; margin: 0px auto; display: block; padding-right: 0px; border-width: 0px;\" title=\"datastaxmarketplace5\" width=\"459\"> &nbsp; Once you are done with configuring the cluster, you can review the configuration and also have the option to &ldquo;Download&rdquo; the completed template, so you can review how the template works or so you can deploy programmatically later. <img alt=\"datastaxmarketplace6\" border=\"0\" height=\"487\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/datastaxmarketplace6.png\" style=\"background-image: none; float: none; padding-top: 0px; padding-left: 0px; margin: 0px auto; display: block; padding-right: 0px; border: 0px;\" title=\"datastaxmarketplace6\" width=\"610\"> And here&rsquo;s a quick snippet of the downloaded template <img alt=\"datastaxmarketplace9\" border=\"0\" height=\"473\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/datastaxmarketplace9.png\" style=\"background-image: none; float: none; padding-top: 0px; padding-left: 0px; margin: 0px auto; display: block; padding-right: 0px; border: 0px;\" title=\"datastaxmarketplace9\" width=\"610\"> Once you are done, go ahead and &lsquo;Buy&rsquo; the offer through Azure Marketplace and then &lsquo;Create&rsquo; the cluster. Please note that the DataStax clusters are &lsquo;BYOL&rsquo;, hence, these clusters will incur the usual compute, Network &amp; Storage costs. The deployment will typically take 15-45 minutes, depending on the number of nodes requested.</p>\n\n<h2>Accessing the DataStax Cluster</h2>\n\n<p>On completion, DataStax OpsCenter will be accessible at <a href=\"https://%7bclustername%7d.%7bregion%7d.cloudapp.azure.com:8443/\">https://{clusterName}.{region}.cloudapp.azure.com:8443</a>. For example, it will be look something like this - <a href=\"https://cloudguycluster.eastus.cloudapp.azure.com:8443\">https://cloudguycluster.eastus.cloudapp.azure.com:8443</a>. The default username for OpsCenter is admin. The password will be set to the administrator password specified in the template input parameters.</p>\n\n<h2>Troubleshooting Tips</h2>\n\n<p>If you run into an error during the deployment, please navigate to the resource group in the Azure Preview Portal as shown below <img alt=\"datastaxmarketplace10\" border=\"0\" height=\"303\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/datastaxmarketplace10.png\" style=\"background-image: none; float: none; padding-top: 0px; padding-left: 0px; margin: 0px auto; display: block; padding-right: 0px; border: 0px;\" title=\"datastaxmarketplace10\" width=\"610\"> Now select the failed bucket in the &ldquo;Events&rdquo; blade. And further, select the operation that &ldquo;failed&rdquo;. In this case, it was the deployment of a Microsoft.Compute/virtualMachines resource. <img alt=\"datastaxmarketplace7\" border=\"0\" height=\"348\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/datastaxmarketplace7.png\" style=\"background-image: none; float: none; padding-top: 0px; padding-left: 0px; margin: 0px auto; display: block; padding-right: 0px; border: 0px;\" title=\"datastaxmarketplace7\" width=\"610\"> Once you&rsquo;ve selected the correct operation, you can look through the exact set of events to find the oldest failure event to see what the actual error was. In this particular case, it was lack of sufficient cores in that particular region. You can see the following status message in the &lsquo;properties&rsquo; section of the &ldquo;Detail&rdquo; blade - {&quot;error&quot;:{&quot;code&quot;:&quot;OperationNotAllowed&quot;,&quot;message&quot;:&quot;Operation results in exceeding quota limits of Core. Maximum allowed: 20, Current in use: 17, Additional requested: 16.&quot;}} Other common errors that you can run into includes the DNS Name unavailability for Storage Account or the Public IP address name. Specifying a unique cluster name will avoid these errors. <img alt=\"datastaxmarketplace8\" border=\"0\" height=\"373\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/datastaxmarketplace8.png\" style=\"background-image: none; float: none; padding-top: 0px; padding-left: 0px; margin: 0px auto; display: block; padding-right: 0px; border: 0px;\" title=\"datastaxmarketplace8\" width=\"610\"></p>\n"
}
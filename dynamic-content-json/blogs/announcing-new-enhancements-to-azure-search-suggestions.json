{
    "Slug": "announcing-new-enhancements-to-azure-search-suggestions",
    "Title": "Announcing New Enhancements to Azure Search Suggestions",
    "Summary": "When we first implemented search suggestions in Azure Search we did so with prefix matching. We listened to your feedback and have now implemented infix matching to enhance the results!",
    "Content": "“Search suggestions” is the building block you use to implement auto-complete functionality in your application. In some scenarios it’s a key piece of functionality that helps users navigate what’s available before they actually execute a search request.\n\nWhen we first implemented search suggestions (auto-complete) in Azure Search we did it with prefix matching. For example, if a field that’s suggestions-enabled had the string “the quick brown fox jumps over the lazy dog” we would suggest this document if the partial input was “the”, “the qu”, “the quick brown fox”, etc., but we wouldn’t suggest this document if the partial input was “quick brown fox” or “lazy dog”. We’ve heard repeatedly that it didn’t meet expectations in terms suggestions results.\n\nIn summary, the feedback we got was:\n<ol>\n <li>Search suggestions queries don’t do infix matching, only prefix matching. This was by far the most common post of feedback.</li>\n <li>Suggestions were limited to 10 per result, too few for some scenarios.</li>\n <li>Suggestions were limited to 25 characters in length. In some cases people would like to go further than that.</li>\n <li>Suggestions required at least 3 characters in the input to return results.</li>\n</ol>\n&nbsp;\n<h2>Infix Matching and Fuzzy Matching</h2>\nWe have deployed to production an entirely new implementation of suggestions that addresses all these items. In particular it’ll do infix matching for suggestions, allowing the user to enter ‘brown fo’, and retrieve suggestions such as ‘The quick brown fox jumped…’ (matches still need to be at word boundaries, it won’t match character sequences that exist mid-term).  Fuzzy matching is enabled to allow for more flexibility for spelling mistakes. It also allows up to 100 suggestions per result, has no limit in length other than field limits and doesn’t have the 3-character minimum length. It’s still under the <a href=\"https://azure.microsoft.com/en-in/documentation/articles/search-api-2014-10-20-preview/#Suggestions\">experimental version 2014-10-20-Preview</a> since we’re not done getting feedback and adjusting the feature.\n\nOur previous API for suggestions was a boolean “suggestions” option in the field definition. While it was simple, it had no room to grow (e.g. there was not spot to indicate which matching strategy to use). We are augmenting the API for suggestions now so in the future we have space to add more capabilities. Indexes now have a collection of “suggesters” which have a name and a search mode (which will allow us to bring prefix-matching suggesters to the new API soon). The first suggester we’re introducing sources suggestions from fields in documents and uses infix matching.\n\nThis is what a new index definition looks like including a suggester:\n<pre class=\"prettyprint\">{\n\nfields: [\n\n{ \"name\": \"id\", \"type\": \"Edm.String\", \"key\": true },\n\n{ \"name\": \"title\", \"type\": \"Edm.String\" }\n\n],\n\nsuggesters: [\n\n{ \"name\": \"sg\", \"searchMode\": \"analyzingInfixMatching\", \"sourceFields\": [\"title\"] }\n\n]\n}</pre>\nTo use it in suggestions requests you need to reference the suggester (always remember to URL-encode the search text):\n<p style=\"padding-left: 30px;\">https://mysvcname.search.windows.net/indexes/myindex/docs/suggest?api-version=2014-10-20-Preview&amp;search=lazy+dog&amp;suggesterName=sg</p>\n\n<h2>Next Steps</h2>\nYou can try out these new enhancements using a tutorial we recently posted on “<a href=\"https://azure.microsoft.com/blog/2015/01/20/azure-search-how-to-add-suggestions-auto-complete-to-your-search-applications/\">How to Add Suggestions (auto-complete) to your Search Applications</a>”.\n\nYou can also read the documentation for suggesters that describes all the options in the <a href=\"https://azure.microsoft.com/en-in/documentation/articles/search-api-2014-10-20-preview/\">2014-10-20-Preview API documentation</a>.\n\nNote that you need to add new fields and bind them to a new suggester or create a new index for this to work. You can’t add a suggester bound to an existing field in an existing index.\n\nIf you use suggestions and have some time please give this a try. We’d love to hear your <a href=\"https://social.msdn.microsoft.com/Forums/azure/en-US/home?forum=azuresearch\">feedback</a>!\n\nLiam Cavanagh can be contacted at his blog or through <a href=\"https://twitter.com/liamca\" target=\"_blank\">twitter</a>."
}
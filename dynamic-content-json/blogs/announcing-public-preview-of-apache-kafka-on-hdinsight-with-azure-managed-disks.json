{
    "Slug": "announcing-public-preview-of-apache-kafka-on-hdinsight-with-azure-managed-disks",
    "Title": "Announcing public preview of Apache Kafka on HDInsight with Azure Managed disks",
    "Summary": "HDInsight set a firm goal of helping enterprises build secure, robust, scalable open source streaming pipelines on Azure. To meet this goal, a few months ago we announced a limited preview of Managed Kafka on Azure HDInsight.",
    "Content": "<p>HDInsight set a firm goal of helping enterprises build secure, robust, scalable open source streaming pipelines on Azure. To meet this goal, a few months ago <a href=\"https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=5&amp;cad=rja&amp;uact=8&amp;ved=0ahUKEwi2ge_F-LrUAhUhS5oKHWZFAg4QFghCMAQ&amp;url=https%3A%2F%2Fchannel9.msdn.com%2FShows%2FAzure-Friday%2FIntroducing-Apache-Kafka-on-Azure-HDInsight&amp;usg=AFQjCNE9K8XAt-z0ppbTkFYk6bgbsEbduw&amp;sig2=1JR8uoivaE9PURAqCjqeSg\">we announced</a> a limited preview of <a href=\"https://azure.microsoft.com/en-us/services/hdinsight/apache-kafka/\">Managed Kafka on Azure HDInsight</a>. The addition of Kafka on HDInsight completes the ingestion piece for scalable open source streaming on Azure. In addition to the scale and performance benefits of Apache Kafka, HDInsight Kafka customers reap the following advantages:</p>\n\n<ul>\n <li>The promise of a managed open source Kafka backed by a <a href=\"https://azure.microsoft.com/en-us/support/legal/sla/hdinsight/v1_0/?v=17.23h\">99.9%</a> uptime SLA\n\n <ul>\n  <li>This includes installation, configuration, and management of open source components</li>\n  <li>HDInsight additionally provisions and monitors a Zookeeper quorum as part of the cluster shape.</li>\n </ul>\n </li>\n <li>Managed rebalance of replicas and partitions across Azure update domains and fault domains. This ensures high availability of Kafka partitions on environments with a multidimensional view of a rack. This tool is also <a href=\"https://github.com/hdinsight/hdinsight-kafka-tools\">open sourced here</a>.</li>\n <li>Security and compliance benefits of <a href=\"https://www.microsoft.com/en-us/TrustCenter/Compliance\">Azure</a> and <a href=\"https://azure.microsoft.com/en-us/services/hdinsight/?v=17.23h\">HDInsight</a> with certifications such as SOC, PCI, DSS.</li>\n <li>An integrated experience to deploy a managed and secure streaming pipeline (Kafka, Storm or Spark streaming) within minutes via prebuilt architectures on ARM templates.</li>\n</ul>\n\n<p>Today we are pleased to announce the Public Preview of Apache Kafka with <a href=\"https://azure.microsoft.com/en-us/services/managed-disks/\">Azure Managed Disks</a> on the HDInsight platform. Users can now deploy Kafka clusters with managed disks straight from Azure portal, with no signup necessary. This allows for the powerful advantage of exponentially higher scalability, alongside exponential lower cost as workloads scale. This feature is discussed in more detail below.</p>\n\n<h2>Customer Success Stories: Toyota Connected</h2>\n\n<p>Over the last year HDInsight has worked very closely with is Toyota Inc. to build one of the world&rsquo;s largest and most distributed connected car streaming platform. This platform processes millions of large events/day in production on HDInsight Kafka to unlock insights in real-time. A platform at this scale was made possible by the secure, managed, and elastically scalable nature of HDInsight. The benefits are best explained by the Chief Product Owner of Toyota Connected below.</p>\n\n<blockquote>\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/a5a7e242-6d34-4d43-8091-6f19cd664dea.png\"><img align=\"left\" alt=\"image\" border=\"0\" height=\"121\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/2a321347-6588-4d17-aa18-cc96ac94e872.png\" style=\"border: 0px currentColor; border-image: none; padding-top: 0px; padding-right: 0px; padding-left: 0px; float: left; display: inline; background-image: none;\" title=\"image\" width=\"189\"></a>&quot;Toyota manufactures millions of cars running globally, and building a connected car platform to process real-time data at Toyota scale is a monumental challenge. To process events at Toyota&rsquo;s scale, technologies such as Kafka need to be leveraged. Since HDInsight is the only managed platform that provides Kafka as a managed service with a 99.9% SLA, Toyota was able to leverage the scalable technology of Kafka, Storm and Spark on Azure HDInsight. Using the HDInsight platform, we were able to deploy enterprise grade streaming pipelines to process events from millions of cars every second. This is just scratching the surface - the future of global connected cars on Azure HDInsight is bright, and we are excited for what&#39;s in store.&quot;&nbsp;&nbsp; -Vijay Chemuturi, Chief Product Owner, Toyota Connected</p>\n</blockquote>\n\n<p>A high-level architecture of the connected car architecture is depicted below. As Vijay states, this is just the beginning &ndash; we are very excited to build upon this powerful streaming platform in the upcoming months.</p>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/ca4cbb01-9e0e-428b-8a5f-0dca84d4bcc5.png\"><img alt=\"Toyota-Blog-Arch-3\" border=\"0\" height=\"576\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/f1c6418d-6f86-4cdb-bc82-548ef84c25f0.png\" style=\"border: 0px currentColor; border-image: none; padding-top: 0px; padding-right: 0px; padding-left: 0px; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;\" title=\"Toyota-Blog-Arch-3\" width=\"1024\"></a></p>\n\n<p>More details on architecting similar IoT scenarios will follow in upcoming series of blogs.</p>\n\n<h2>Integration of HDInsight Kafka with Azure Managed Disks</h2>\n\n<p>With this public preview, HDInsight Kafka is also releasing native integration with Azure Managed Disks.</p>\n\n<p>Azure Managed Disks is a new feature that abstracts the storage account specification for the customer allowing for an easier and managed route to use disks. They provide for a higher scale by abolishing the storage account IOPS limitation, along with the ability to create hundreds of VMs from a given VHD in a centralized storage account. A disk can be either Premium (SSD) or Standard (HDD), and 1 TB in size. More information on this feature is located here.</p>\n\n<p>Kafka is a high throughput, low latency messaging service that is I/O heavy. Prior to Azure Managed Disks, HDInsight Kafka&rsquo;s original preview offering stored data on the largest persisted disk of the node. This meant that each node had a limitation of 1 TB. Given Kafka&rsquo;s I/O heavy nature the disk would often become the bottleneck and additional nodes needed to be added for more storage. This resulted in high cost, with a gross underutilization of the CPU and memory on the cluster. With this release, we are implementing the HDInsight Kafka with Managed Disks feature, which is pictorially depicted below.</p>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/0f8c2c1c-5f39-487a-b862-04fd60c560fb.png\"><img alt=\"Kafka-MD-Diagram\" border=\"0\" height=\"576\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/e753a130-ce6b-47cc-b104-27cad7858d30.png\" style=\"border: 0px currentColor; border-image: none; padding-top: 0px; padding-right: 0px; padding-left: 0px; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;\" title=\"Kafka-MD-Diagram\" width=\"1024\"></a></p>\n\n<p>With this feature, one can have both persisted and scalable data, up to 16 TBs per node. This allows for an exponentially lower cost, higher scalability and better performance as the workloads increase. Since the cost of a disk is a fraction of the cost of a node, the below figure shows how the number of nodes and cost scales down exponentially as scaling needs increase.</p>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/b55a01bf-8195-4e48-9b90-4dc5b8dfb657.png\"><img alt=\"KafkaBlogScale\" border=\"0\" height=\"384\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/31a8586e-a27d-486b-abf7-83e822639d9e.png\" style=\"border: 0px currentColor; border-image: none; padding-top: 0px; padding-right: 0px; padding-left: 0px; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;\" title=\"KafkaBlogScale\" width=\"1024\"></a></p>\n\n<p>This feature is automatically turned on, and taking advantage of this feature is simple &ndash; the user just needs to specify the number of disks to be attached to a given node. This can be done via the portal, or by specifying a single property in the ARM template, shown in the below figures. Note that the type of disk &ndash; Premium or Standard is determined by the type of VMs chosen the worker nodes. Premium disks are attached to D<strong>S</strong> and G<strong>S</strong> series VMs, whereas standard are attached to all other VM types. End to end templates, with examples on how to create these clusters are detailed in the next section. More information on this is located in our <a href=\"https://docs.microsoft.com/en-us/azure/hdinsight/hdinsight-apache-kafka-get-started\">documentation</a>.</p>\n\n<table border=\"0\" cellpadding=\"2\" cellspacing=\"0\" width=\"533\">\n <tbody>\n  <tr>\n   <td valign=\"top\" width=\"222\"><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/04067fd1-0ee6-42e4-abef-140cd1483dd7.png\"><img alt=\"KafkaBlogPortal\" border=\"0\" height=\"354\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/93bc6b29-3f05-4a4c-a7b4-fe344ee1011d.png\" style=\"border: 0px currentColor; border-image: none; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; background-image: none;\" title=\"KafkaBlogPortal\" width=\"350\"></a></td>\n   <td valign=\"top\" width=\"309\"><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/44335bed-7ad3-44cb-89ec-afc0a4662bf6.png\"><img align=\"left\" alt=\"image\" border=\"0\" height=\"356\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/74cc5a47-5d3a-4a11-8863-ffcb0805c584.png\" style=\"border-width: 0px; border-image: none; padding-top: 0px; padding-right: 0px; padding-left: 0px; float: left; display: inline; background-image: none;\" title=\"image\" width=\"350\"></a></td>\n  </tr>\n  <tr>\n   <td valign=\"top\" width=\"222\">\n   <p align=\"left\"><em>Disk Specification via Portal 1</em></p>\n   </td>\n   <td valign=\"top\" width=\"309\">\n   <p align=\"left\"><em>Disk Specification via ARM template 1</em></p>\n   </td>\n  </tr>\n </tbody>\n</table>\n\n<h2>Start deploying and using Spark, Storm, and Kafka with Managed Disks on HDInsight within minutes</h2>\n\n<p>We have updated our documentation and samples to help deploy scalable open source streaming solutions on HDInsight. Each of these examples walks through creating the clusters step by step, and contain one-click deploy ARM templates to enable powerful pipelines. We have additionally updated the Spark Streaming examples to include the new examples for Structured Streaming, and creating an end to end pipeline using Twitter, Kafka, Spark Streaming..</p>\n\n<ul>\n <li><a href=\"https://docs.microsoft.com/en-us/azure/hdinsight/hdinsight-apache-kafka-get-started\">Getting Started with Kafka for HDInsight</a></li>\n <li><a href=\"https://docs.microsoft.com/en-us/azure/hdinsight/hdinsight-apache-spark-with-kafka\">Deploy HDInsight Kafka + Spark streaming</a></li>\n <li><a href=\"https://docs.microsoft.com/en-us/azure/hdinsight/hdinsight-apache-storm-with-kafka\">Deploy HDInsight Kafka + Storm</a></li>\n <li><a href=\"https://docs.microsoft.com/en-us/azure/hdinsight/hdinsight-apache-kafka-connect-vpn-gateway\">Stream data from on-premise to HDInsight Kafka in the cloud</a></li>\n <li><a href=\"https://docs.microsoft.com/azure/hdinsight/hdinsight-apache-kafka-spark-structured-streaming\">Stream tweets to HDInsight Kafka and process with Spark structured streaming</a></li>\n</ul>\n\n<p>For any questions, suggestions or feedback, please do not hesitate to reach out to us via <a href=\"mailto:HDIFeedback@microsoft.com\">HDIFeedback@microsoft.com</a>. We are really excited to have you onboard, and would love to hear from you.</p>\n"
}
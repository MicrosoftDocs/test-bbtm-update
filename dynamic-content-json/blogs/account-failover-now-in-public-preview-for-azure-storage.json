{
    "Slug": "account-failover-now-in-public-preview-for-azure-storage",
    "Title": "Account failover now in public preview for Azure Storage",
    "Summary": "Today we are excited to share the preview for account failover for customers with geo-redundant storage (GRS) enabled storage accounts. Customers using GRS or RA-GRS accounts can take advantage of this functionality to control when to failover from the primary region to the secondary region for their storage accounts.",
    "Content": "<div style=\"background:#eee;border:1px solid #ccc;padding:5px 10px;\"><em><strong>Update May 6, 2020</strong>:&nbsp;Azure storage account failover is now generally available in all public regions. Please refer to <a href=\"https://docs.microsoft.com/en-us/azure/storage/common/storage-disaster-recovery-guidance\" target=\"_blank\">our documentation</a> for the latest details.</em></div>\n\n<p>Today we are excited to share the preview for account failover for customers with geo-redundant storage (GRS) enabled storage accounts. Customers using GRS or RA-GRS accounts can take advantage of this functionality to control when to failover from the primary region to the secondary region for their storage accounts.</p>\n\n<p>Customers have told us that they wish to control storage account failover so they can determine when storage account write access is required and the secondary replication state is understood.&nbsp;</p>\n\n<p>If the primary region for your geo-redundant storage account becomes unavailable for an extended period of time, you can force an account failover. When you perform a failover, all data in the storage account is failed over to the secondary region, and the secondary region becomes the new primary region. The DNS records for all storage service endpoints &ndash; blob, Azure Data Lake Storage Gen2, file, queue, and table &ndash; are updated to point to the new primary region. Once the failover is complete, clients can automatically begin writing data to the storage account using the service endpoints in the new primary region, without any code changes.</p>\n\n<p>The diagram below shows how account failover works. Under normal circumstances, a client writes data to a geo-redundant storage account (GRS or RA-GRS) in the primary region, and that data is replicated asynchronously to the secondary region. If write operations to the primary region fail consistently then you can trigger the failover.</p>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/dd11e86a-5584-4a8f-8686-825659beacb5.png\"><img alt=\"Account failover diagram\" border=\"0\" height=\"371\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/57083c9c-93dc-46df-9f2b-6ea323d699bc.png\" style=\"border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;\" title=\"Account failover diagram\" width=\"640\"></a></p>\n\n<p>After the failover is complete, write operations can resume against the new primary service endpoints.</p>\n\n<p>Post failover, the storage account is configured to be locally redundant (LRS). To resume replication to the new secondary region, configure the account to use geo-redundant storage again (either RA-GRS or GRS). Keep in mind that converting an locally-redundant (LRS) account to RA-GRS or GRS incurs a cost.</p>\n\n<p>Account failover is supported in preview for new and existing Azure Resource Manager storage accounts that are configured for RA-GRS and GRS. Storage accounts may be general-purpose v1 (GPv1), general-purpose v2 (GPv2), or Blob Storage accounts. Account failover is currently supported in US-West 2 and US-West Central.</p>\n\n<p>You can initiate account failover using the <a href=\"https://portal.azure.com/\" target=\"_blank\">Azure portal</a>, <a href=\"https://docs.microsoft.com/en-us/powershell/azure/overview?view=azps-1.2.0\" target=\"_blank\">Azure PowerShell</a>, <a href=\"https://docs.microsoft.com/en-us/cli/azure/?view=azure-cli-latest\" target=\"_blank\">Azure CLI</a>, or the <a href=\"https://docs.microsoft.com/en-us/rest/api/storagerp/\" target=\"_blank\">Azure Storage Resource Provider API</a>. The process is simple and easy to perform. The image below shows how to trigger account failover in the Azure portal in one step.</p>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/41e56e62-8c25-4186-950d-38e5faf386ff.png\"><img alt=\"Geo-replication in the Azure portal\" border=\"0\" height=\"711\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/e0ddf1cc-433d-48ed-91c1-90af29032295.png\" style=\"border: 0px currentcolor; border-image: none; display: inline; background-image: none;\" title=\"Geo-replication in the Azure portal\" width=\"1030\"></a></p>\n\n<p>As is the case with most previews, account failover should not be used with production workloads. There is no production SLA until the feature becomes generally available.</p>\n\n<p>It&#39;s important to note that account failover often results in some data loss, because geo-replication always involves latency. The secondary endpoint is typically behind the primary endpoint. So when you initiate a failover, any data that has not yet been replicated to the secondary region will be lost.</p>\n\n<p>We recommend that you always check the <strong>Last Sync Time</strong> property before initiating a failover to evaluate how far the secondary is behind the primary. To understand the implications of account failover and learn more about the feature, please read the documentation, &ldquo;<a href=\"https://docs.microsoft.com/en-us/azure/storage/common/storage-disaster-recovery-guidance\" target=\"_blank\">What to do if an Azure Storage outage occurs</a>.&rdquo;</p>\n\n<p>For questions about participation in the preview or about account failover, contact xstoredr@microsoft.com. We welcome your feedback on the account failover feature and documentation!</p>\n"
}